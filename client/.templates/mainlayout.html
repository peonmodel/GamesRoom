<template name="MainLayout">
	<div class="ui container">
		{{> sAlert}}
		<br/>
		{{#if currentUser}}
			{{#unless currentUser.profile.public.isRegistered}}
			Logged in as Guest {{currentUser.username}}
			{{> RegisterOrLogin}}
			{{/unless}}
			<a class="ui button js-logout">Log out</a>
		{{else}}
			{{#if loggingIn}}
				Logging in...
			{{else}}
				{{> RegisterOrLogin}}
			{{/if}}
		{{/if}}
		<hr>
		{{> Template.dynamic template=content}}
	</div>
</template>

<template name="RegisterOrLogin">
	<div class="ui input">
		<input type="text" class="username" placeholder="{{tempName}}">
	</div>
	<!--
		<div class="ui input">
			<input type="text" class="email" placeholder="optional">
		</div>
	-->
	<div class="ui input">
		<input type="password" class="password">
	</div>
	{{#unless currentUser}}
	<a class="ui button js-login">Login</a>
	{{> GuestLogIn tempName=tempName}}
	{{/unless}}
	
	<a class="ui button js-register">Register</a>
	
</template>

<template name="GuestLogIn">
	<a class="ui button js-guestlogin">Guest login</a>
</template>
